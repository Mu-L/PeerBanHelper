import{u as U,b as V,c as j,I as F,f as I,h as te,_ as E,j as _e}from"./index-BbwI1mJC.js";/* empty css              */import{f as R,a7 as G,ak as ae,s as c,a3 as e,t,y as a,v as l,x as i,m as C,u as _,j as B,P as ne,F as oe,k as r,a as Z,a9 as ge,c as me,ae as fe,o as be,M as ye,N as he,E as ee,p as Se}from"./libs-BYIN-Nlk.js";import{c as ke,d as we,e as ve}from"./data-Dq-SwbBm.js";import{t as le,S as M,T as q,e as O,a9 as Ie,c as se,E as Te,K as ze,a5 as Le,A as Pe,$ as xe,j as Ce,D as Ne,b as He,L as $e,f as Ae,at as De,au as Fe,N as Ke,av as Be,ao as Ue,a0 as Ve,C as je}from"./arcoDesign-CWLifbdQ.js";import{I as Ee}from"./index-LMbWXuwu.js";import{I as Re}from"./index-D7HAnLk3.js";import"./uuid-5hg4BtTT.js";const Ge=R({__name:"accessHistoryTable",props:{ip:{}},setup(K){const{t:d,d:s}=G(),L=U(),{data:n,total:N,current:H,loading:S,pageSize:$,changeCurrent:m,changePageSize:P}=ae(ke,{defaultParams:[{ip:K.ip,page:1,pageSize:5}],pagination:{currentKey:"page",pageSizeKey:"pageSize",totalKey:"data.total"},cacheKey:g=>`${L.endpoint}-ipAccessHistory-${g?.[0].ip}-${g?.[0].page||1}-${g?.[0].pageSize||10}`}),x=[{title:()=>d("page.torrentList.accessHistory.column.downloader"),slotName:"downloader"},{title:"Peer ID",slotName:"peerId"},{title:()=>d("page.torrentList.accessHistory.column.traffic"),slotName:"traffic",width:120},{titleSlotName:"offsetTitle",slotName:"offset",width:120},{title:()=>d("page.dashboard.peerList.column.flag"),slotName:"flags",width:120},{title:()=>d("page.torrentList.accessHistory.column.timeseen"),slotName:"time",width:260},{title:()=>d("page.ipList.accessHistory.column.torrent"),dataIndex:"torrent.name",ellipsis:!0,tooltip:!0}],T=g=>g.split(" ").map(p=>p+" - "+d("page.dashboard.peerList.column.flags."+p.trim()));return(g,p)=>{const z=se,k=O,w=V,h=q,v=j,f=M,b=Ie,u=le,A=Te;return e(n)?.data.results||e(S)?(r(),c(u,{key:0,stripe:!0,columns:x,data:e(n)?.data.results,loading:e(S),pagination:{total:e(N),current:e(H),pageSize:e($),showPageSize:!0,baseSize:4,bufferSize:1},"column-resizable":"",size:"medium",bordered:!1,class:"banlog-table",onPageChange:e(m),onPageSizeChange:e(P)},{downloader:t(({record:o})=>[a(z,{color:e(te)(o.downloader.id)},{default:t(()=>[l(i(o.downloader.name),1)]),_:2},1032,["color"])]),peerId:t(({record:o})=>[C("p",null,[l(i(o.peerId?o.peerId:e(d)("page.banlist.banlist.listItem.empty"))+" ",1),a(k,{content:o.clientName?o.clientName:e(d)("page.banlist.banlist.listItem.empty")},{default:t(()=>[a(e(F))]),_:2},1032,["content"])])]),traffic:t(({record:o})=>[a(f,{fill:"",direction:"vertical"},{default:t(()=>[a(h,null,{default:t(()=>[a(w,{class:"green"}),l(" "+i(e(I)(o.uploaded)),1)]),_:2},1024),a(h,null,{default:t(()=>[a(v,{class:"red"}),l(" "+i(e(I)(o.downloaded)),1)]),_:2},1024)]),_:2},1024)]),offset:t(({record:o})=>[a(f,{fill:"",direction:"vertical"},{default:t(()=>[a(h,null,{default:t(()=>[a(w,{class:"green"}),l(" "+i(e(I)(o.uploadedOffset)),1)]),_:2},1024),a(h,null,{default:t(()=>[a(v,{class:"red"}),l(" "+i(e(I)(o.downloadedOffset)),1)]),_:2},1024)]),_:2},1024)]),offsetTitle:t(()=>[a(f,{size:"mini"},{default:t(()=>[l(i(e(d)("page.torrentList.accessHistory.column.offset"))+" ",1),a(b,{content:e(d)("page.torrentList.accessHistory.column.offsetDescription")},{default:t(()=>[a(e(F))]),_:1},8,["content"])]),_:1})]),flags:t(({record:o})=>[C("p",null,[l(i(o.lastFlags)+" ",1),o.lastFlags?(r(),c(k,{key:0},{content:t(()=>[(r(!0),B(oe,null,ne(T(o.lastFlags),D=>(r(),B("p",{key:D},i(D),1))),128))]),default:t(()=>[a(e(F))]),_:2},1024)):_("",!0)])]),time:t(({record:o})=>[a(f,{fill:"",direction:"vertical"},{default:t(()=>[a(h,null,{default:t(()=>[l(i(e(d)("page.torrentList.accessHistory.column.timeseen.first"))+": "+i(e(s)(o.firstTimeSeen,"long")),1)]),_:2},1024),a(h,null,{default:t(()=>[l(i(e(d)("page.torrentList.accessHistory.column.timeseen.last"))+": "+i(e(s)(o.lastTimeSeen,"long")),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["data","loading","pagination","onPageChange","onPageSizeChange"])):(r(),c(A,{key:1,style:{height:"20vh","align-items":"center",display:"flex","justify-content":"center","flex-direction":"column"}},{default:t(()=>[l(i(e(d)("page.torrentList.accessHistory.empty")),1)]),_:1}))}}}),Me=E(Ge,[["__scopeId","data-v-c7e17ba1"]]),qe=R({__name:"banHistoryTable",props:{ip:{}},setup(K){const d=U(),{t:s,d:L}=G(),{data:n,total:N,current:H,loading:S,pageSize:$,changeCurrent:m,changePageSize:P}=ae(we,{defaultParams:[{ip:K.ip,page:1,pageSize:10}],pagination:{currentKey:"page",pageSizeKey:"pageSize",totalKey:"data.total"},cacheKey:T=>`${d.endpoint}-banlogs-${T?.[0].page||1}-${T?.[0].pageSize||10}`}),x=[{title:()=>s("page.banlog.banlogTable.column.banTime")+"/"+s("page.banlog.banlogTable.column.unbanTime"),slotName:"banAt",width:220},{title:()=>s("page.banlog.banlogTable.column.peerPort"),dataIndex:"peerPort",width:80},{title:()=>s("page.banlog.banlogTable.column.peerId"),slotName:"peerId",width:120},{title:()=>s("page.banlog.banlogTable.column.trafficSnapshot"),slotName:"peerStatus",width:150},{title:()=>s("page.banlog.banlogTable.column.torrentName"),dataIndex:"torrentName",ellipsis:!0,tooltip:!0},{title:()=>s("page.banlog.banlogTable.column.torrentSize"),slotName:"torrentSize",width:120},{title:()=>s("page.banlog.banlogTable.column.description"),dataIndex:"description",ellipsis:!0,tooltip:!0}];return(T,g)=>{const p=Ee,z=q,k=Le,w=M,h=V,v=j,f=ze,b=O,u=F,A=le;return r(),c(A,{stripe:!0,columns:x,data:e(n)?.data.results,loading:e(S),pagination:{total:e(N),current:e(H),pageSize:e($),showPageSize:!0,baseSize:4,bufferSize:1},bordered:!1,"column-resizable":"",size:"medium",class:"banlog-table",onPageChange:e(m),onPageSizeChange:e(P)},{banAt:t(({record:o})=>[a(w,{fill:"",direction:"vertical"},{default:t(()=>[a(z,null,{default:t(()=>[a(p),l(" "+i(e(L)(o.banAt,"long")),1)]),_:2},1024),a(z,null,{default:t(()=>[a(k),l(" "+i(o.unbanAt?e(L)(o.unbanAt,"long"):e(s)("page.banlog.banlogTable.notUnbanned")),1)]),_:2},1024)]),_:2},1024)]),peerStatus:t(({record:o})=>[a(w,{fill:"",style:{"justify-content":"space-between"}},{default:t(()=>[a(w,{fill:"",direction:"vertical"},{default:t(()=>[a(z,null,{default:t(()=>[a(h,{class:"green"}),l(" "+i(e(I)(o.peerUploaded)),1)]),_:2},1024),a(z,null,{default:t(()=>[a(v,{class:"red"}),l(" "+i(e(I)(o.peerDownloaded)),1)]),_:2},1024)]),_:2},1024),a(b,{content:(o.peerProgress*100).toFixed(2)+"%"},{default:t(()=>[a(f,{percent:o.peerProgress,size:"mini"},null,8,["percent"])]),_:2},1032,["content"])]),_:2},1024)]),peerId:t(({record:o})=>[C("p",null,[l(i(o.peerId?o.peerId:e(s)("page.banlist.banlist.listItem.empty"))+" ",1),a(b,{content:o.peerClientName?o.peerClientName:e(s)("page.banlist.banlist.listItem.empty")},{default:t(()=>[a(u)]),_:2},1032,["content"])])]),torrentSize:t(({record:o})=>[a(b,{content:`Hash: ${o.torrentInfoHash}`},{default:t(()=>[C("p",null,i(e(I)(o.torrentSize)),1)]),_:2},1032,["content"])]),_:1},8,["data","loading","pagination","onPageChange","onPageSizeChange"])}}}),Oe=E(qe,[["__scopeId","data-v-d62f8681"]]),We={class:"center searchContainer"},Je={class:"result-container center"},Qe=R({__name:"index",setup(K){const d=Z(""),{t:s,d:L}=G(),{data:n,loading:N,run:H,error:S}=ge(ve,{manual:!0}),$=U(),m=me(()=>$.plusStatus),P=Z([]),{query:x}=fe(),T=g=>{if(g){if(n.value=void 0,P.value=[],g!==x.ip){const p=new URLSearchParams(window.location.search);p.set("ip",g),window.history.pushState({},"",new URL(`${window.location.origin}${window.location.pathname}?${p.toString()}`))}H(g)}};return be(()=>{x.ip&&(d.value=x.ip,T(d.value))}),(g,p)=>{const z=Pe,k=q,w=xe,h=Ce,v=se,f=O,b=M,u=He,A=V,o=j,D=F,ie=$e,W=Ae,re=Ne,J=Ke,Q=Be,X=Re,Y=Fe,ce=De,pe=Ve,de=Ue,ue=je;return r(),c(b,{direction:"vertical",fill:"",class:"center"},{default:t(()=>[a(w,{style:{"text-align":"center"}},{default:t(()=>[a(z,null,{default:t(()=>[l(i(e(s)("page.ipList.title")),1)]),_:1}),a(k,null,{default:t(()=>[l(i(e(s)("page.ipList.description")),1)]),_:1})]),_:1}),C("div",We,[a(h,{modelValue:d.value,"onUpdate:modelValue":p[0]||(p[0]=y=>d.value=y),"search-button":"",placeholder:"192.168.1.1....",class:"searchBox",loading:e(N),onSearch:T},null,8,["modelValue","loading"])]),C("div",Je,[ye(a(ue,{class:"result-card",style:Se({minWidth:e(n)?.data.found?"1150px":"400px"}),hoverable:""},{default:t(()=>[e(S)?(r(),c(de,{key:1,status:"500",title:e(s)("page.ipList.error"),subtitle:e(S).message},{default:t(()=>[a(w,{style:{background:"var(--color-fill-2)",padding:"24px"}},{default:t(()=>[a(pe,null,{default:t(()=>p[7]||(p[7]=[l("Details:")])),_:1,__:[7]}),C("ul",null,[(r(!0),B(oe,null,ne(e(S).stack?.split(`
`),y=>(r(),B("li",{key:y},i(y),1))),128))])]),_:1})]),_:1},8,["title","subtitle"])):(r(),c(b,{key:0,direction:"vertical",fill:""},{default:t(()=>[a(re,null,{title:t(()=>[a(b,null,{default:t(()=>[l(i(e(n)?.data.address)+" ",1),e(n)?.data.found?_("",!0):(r(),c(f,{key:0,content:e(s)("page.ipList.notfound.tips")},{default:t(()=>[a(v,null,{default:t(()=>p[2]||(p[2]=[l("Not found")])),_:1,__:[2]})]),_:1},8,["content"]))]),_:1})]),default:t(()=>[e(n)?.data.found?(r(),c(u,{key:0,label:e(s)("page.ipList.label.banCount"),span:2},{default:t(()=>[l(i(e(n)?.data.banCount),1)]),_:1},8,["label"])):_("",!0),e(n)?.data.found?(r(),c(u,{key:1,label:e(s)("page.ipList.label.torrentAccessCount"),span:2},{default:t(()=>[l(i(e(n)?.data.torrentAccessCount),1)]),_:1},8,["label"])):_("",!0),e(n)?.data.found?(r(),c(u,{key:2,label:e(s)("page.ipList.label.uploadedToPeer"),span:2},{default:t(()=>[a(k,null,{default:t(()=>[a(A,{class:"green"}),l(" "+i(e(I)(e(n)?.data.uploadedToPeer??0)),1)]),_:1})]),_:1},8,["label"])):_("",!0),e(n)?.data.found?(r(),c(u,{key:3,label:e(s)("page.ipList.label.downloadedFromPeer"),span:2},{default:t(()=>[a(k,null,{default:t(()=>[a(o,{class:"red"}),l(" "+i(e(I)(e(n)?.data.downloadedFromPeer??0)),1)]),_:1})]),_:1},8,["label"])):_("",!0),e(n)?.data.found?(r(),c(u,{key:4,label:e(s)("page.ipList.label.firstTimeSeen"),span:2},{default:t(()=>[l(i(e(L)(e(n)?.data.firstTimeSeen??0,"long")),1)]),_:1},8,["label"])):_("",!0),e(n)?.data.found?(r(),c(u,{key:5,label:e(s)("page.ipList.label.lastTimeSeen"),span:2},{default:t(()=>[l(i(e(L)(e(n)?.data.lastTimeSeen??0,"long")),1)]),_:1},8,["label"])):_("",!0),e(n)?.data.geo?.country?.iso||e(n)?.data.geo?.city?.name?(r(),c(u,{key:6,label:e(s)("page.banlist.banlist.listItem.geo"),span:2},{default:t(()=>[e(n).data.geo?.country?.iso?(r(),c(_e,{key:0,iso:e(n).data.geo?.country?.iso??""},null,8,["iso"])):_("",!0),l(" "+i(`${e(n).data.geo?.country?.name??""} ${e(n).data.geo?.city?.name??""}`),1)]),_:1},8,["label"])):_("",!0),e(n)?.data.geo?.network?.isp?(r(),c(u,{key:7,label:e(s)("page.banlist.banlist.listItem.network.isp"),span:1},{default:t(()=>[l(i(e(n).data.geo?.network?.isp),1)]),_:1},8,["label"])):_("",!0),e(n)?.data.geo?.network?.netType?(r(),c(u,{key:8,label:e(s)("page.banlist.banlist.listItem.network.netType"),span:2},{default:t(()=>[l(i(e(n).data.geo?.network?.netType),1)]),_:1},8,["label"])):_("",!0),e(n)?.data.geo?.as?(r(),c(u,{key:9,label:e(s)("page.banlist.banlist.listItem.asn"),span:2},{default:t(()=>[a(b,null,{default:t(()=>[a(k,null,{default:t(()=>[l(i(e(n).data.geo?.as?.organization),1)]),_:1}),a(v,{color:e(te)((e(n).data.geo?.as?.number??0).toString())},{default:t(()=>[l(i(e(n).data.geo?.as?.number),1)]),_:1},8,["color"]),a(f,{content:e(s)("page.banlist.banlist.listItem.asn.subnet")+e(n).data.geo?.as?.network?.ipAddress+"/"+e(n).data.geo?.as?.network?.prefixLength},{default:t(()=>[a(ie,{href:`https://2ip.io/analytics/asn-list/?asnId=${e(n).data.geo?.as?.number}`,hoverable:!1},{default:t(()=>[a(D)]),_:1},8,["href"])]),_:1},8,["content"])]),_:1})]),_:1},8,["label"])):_("",!0),a(u,{span:8},{label:t(()=>[a(b,null,{default:t(()=>[l(i(e(s)("page.ipList.shortcut"))+" ",1),a(f,{content:e(s)("page.ipList.shortcut.tips")},{default:t(()=>[a(D)]),_:1},8,["content"])]),_:1})]),default:t(()=>[a(b,null,{default:t(()=>[a(W,{href:`https://ip.ping0.cc/ip/${d.value}`,type:"outline"},{default:t(()=>p[3]||(p[3]=[l(" ping0 ")])),_:1,__:[3]},8,["href"]),a(W,{href:`https://search.censys.io/hosts/${d.value}`,type:"outline"},{default:t(()=>p[4]||(p[4]=[l(" Censys ")])),_:1,__:[4]},8,["href"])]),_:1})]),_:1})]),_:1}),e(n)?.data.found?(r(),c(ce,{key:0,"active-key":P.value,"onUpdate:activeKey":p[1]||(p[1]=y=>P.value=y),bordered:!1,"destroy-on-hide":""},{default:t(()=>[a(Y,{key:"1",header:e(s)("page.ipList.label.accessHistory"),disabled:!m.value?.activated,class:"collapse-table"},ee({"expand-icon":t(({active:y})=>[m.value?.activated&&!y?(r(),c(J,{key:0})):m.value?.activated&&y?(r(),c(Q,{key:1})):(r(),c(X,{key:2}))]),default:t(()=>[a(Me,{ip:e(n).data.address},null,8,["ip"])]),_:2},[m.value?.activated?void 0:{name:"extra",fn:t(()=>[a(f,{content:e(s)("page.ipList.plusLock")},{default:t(()=>[a(v,{size:"small"},{default:t(()=>p[5]||(p[5]=[l("Plus")])),_:1,__:[5]})]),_:1},8,["content"])]),key:"0"}]),1032,["header","disabled"]),a(Y,{key:"2",header:e(s)("page.ipList.label.banHistory"),disabled:!m.value?.activated,class:"collapse-table"},ee({"expand-icon":t(({active:y})=>[m.value?.activated&&!y?(r(),c(J,{key:0})):m.value?.activated&&y?(r(),c(Q,{key:1})):(r(),c(X,{key:2}))]),default:t(()=>[a(Oe,{ip:e(n).data.address},null,8,["ip"])]),_:2},[m.value?.activated?void 0:{name:"extra",fn:t(()=>[a(f,{content:e(s)("page.ipList.plusLock")},{default:t(()=>[a(v,{size:"small"},{default:t(()=>p[6]||(p[6]=[l("Plus")])),_:1,__:[6]})]),_:1},8,["content"])]),key:"0"}]),1032,["header","disabled"])]),_:1},8,["active-key"])):_("",!0)]),_:1}))]),_:1},8,["style"]),[[he,e(n)?.data||e(S)]])])]),_:1})}}}),lt=E(Qe,[["__scopeId","data-v-a1560c1f"]]);export{lt as default};
