import{u as V,b as j,c as E,I as F,f as T,h as ae,_ as R,j as ge}from"./index-DgHngGDW.js";/* empty css              */import{f as G,a7 as M,ak as ne,s as c,a3 as e,t,y as a,v as o,x as s,m as N,u as m,j as U,P as oe,F as le,k as i,w as me,c as se,a as ee,a9 as fe,ae as be,o as ye,M as he,N as Se,E as te,p as we}from"./libs-BYIN-Nlk.js";import{c as ke,d as ve,e as Ie}from"./data-9o300zRT.js";import{t as ie,S as q,T as O,e as W,a9 as Te,c as re,E as ze,K as Le,a5 as Pe,A as xe,$ as Ce,j as Ne,D as He,b as $e,L as Ae,f as De,at as Fe,au as Ke,N as Be,av as Ue,ao as Ve,a0 as je,C as Ee}from"./arcoDesign-CWLifbdQ.js";import{I as Re}from"./index-LMbWXuwu.js";import{I as Ge}from"./index-D7HAnLk3.js";import"./uuid-5hg4BtTT.js";const Me=G({__name:"accessHistoryTable",props:{ip:{}},setup(K){const{t:d,d:l}=M(),z=V(),{data:n,total:$,current:A,loading:v,pageSize:D,changeCurrent:f,changePageSize:L}=ne(ke,{defaultParams:[{ip:K.ip,page:1,pageSize:5}],pagination:{currentKey:"page",pageSizeKey:"pageSize",totalKey:"data.total"},cacheKey:g=>`${z.endpoint}-ipAccessHistory-${g?.[0].ip}-${g?.[0].page||1}-${g?.[0].pageSize||10}`}),P=[{title:()=>d("page.torrentList.accessHistory.column.downloader"),slotName:"downloader"},{title:"Peer ID",slotName:"peerId"},{title:()=>d("page.torrentList.accessHistory.column.traffic"),slotName:"traffic",width:120},{titleSlotName:"offsetTitle",slotName:"offset",width:120},{title:()=>d("page.dashboard.peerList.column.flag"),slotName:"flags",width:120},{title:()=>d("page.torrentList.accessHistory.column.timeseen"),slotName:"time",width:260},{title:()=>d("page.ipList.accessHistory.column.torrent"),dataIndex:"torrent.name",ellipsis:!0,tooltip:!0}],H=g=>g.split(" ").map(r=>r+" - "+d("page.dashboard.peerList.column.flags."+r.trim()));return(g,r)=>{const B=re,I=W,S=j,w=O,h=E,b=q,k=Te,_=ie,x=ze;return e(n)?.data.results||e(v)?(i(),c(_,{key:0,stripe:!0,columns:P,data:e(n)?.data.results,loading:e(v),pagination:{total:e($),current:e(A),pageSize:e(D),showPageSize:!0,baseSize:4,bufferSize:1},"column-resizable":"",size:"medium",bordered:!1,class:"banlog-table",onPageChange:e(f),onPageSizeChange:e(L)},{downloader:t(({record:p})=>[a(B,{color:e(ae)(p.downloader)},{default:t(()=>[o(s(p.downloader),1)]),_:2},1032,["color"])]),peerId:t(({record:p})=>[N("p",null,[o(s(p.peerId?p.peerId:e(d)("page.banlist.banlist.listItem.empty"))+" ",1),a(I,{content:p.clientName?p.clientName:e(d)("page.banlist.banlist.listItem.empty")},{default:t(()=>[a(e(F))]),_:2},1032,["content"])])]),traffic:t(({record:p})=>[a(b,{fill:"",direction:"vertical"},{default:t(()=>[a(w,null,{default:t(()=>[a(S,{class:"green"}),o(" "+s(e(T)(p.uploaded)),1)]),_:2},1024),a(w,null,{default:t(()=>[a(h,{class:"red"}),o(" "+s(e(T)(p.downloaded)),1)]),_:2},1024)]),_:2},1024)]),offset:t(({record:p})=>[a(b,{fill:"",direction:"vertical"},{default:t(()=>[a(w,null,{default:t(()=>[a(S,{class:"green"}),o(" "+s(e(T)(p.uploadedOffset)),1)]),_:2},1024),a(w,null,{default:t(()=>[a(h,{class:"red"}),o(" "+s(e(T)(p.downloadedOffset)),1)]),_:2},1024)]),_:2},1024)]),offsetTitle:t(()=>[a(b,{size:"mini"},{default:t(()=>[o(s(e(d)("page.torrentList.accessHistory.column.offset"))+" ",1),a(k,{content:e(d)("page.torrentList.accessHistory.column.offsetDescription")},{default:t(()=>[a(e(F))]),_:1},8,["content"])]),_:1})]),flags:t(({record:p})=>[N("p",null,[o(s(p.lastFlags)+" ",1),p.lastFlags?(i(),c(I,{key:0},{content:t(()=>[(i(!0),U(le,null,oe(H(p.lastFlags),C=>(i(),U("p",{key:C},s(C),1))),128))]),default:t(()=>[a(e(F))]),_:2},1024)):m("",!0)])]),time:t(({record:p})=>[a(b,{fill:"",direction:"vertical"},{default:t(()=>[a(w,null,{default:t(()=>[o(s(e(d)("page.torrentList.accessHistory.column.timeseen.first"))+": "+s(e(l)(p.firstTimeSeen,"long")),1)]),_:2},1024),a(w,null,{default:t(()=>[o(s(e(d)("page.torrentList.accessHistory.column.timeseen.last"))+": "+s(e(l)(p.lastTimeSeen,"long")),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["data","loading","pagination","onPageChange","onPageSizeChange"])):(i(),c(x,{key:1,style:{height:"20vh","align-items":"center",display:"flex","justify-content":"center","flex-direction":"column"}},{default:t(()=>[o(s(e(d)("page.torrentList.accessHistory.empty")),1)]),_:1}))}}}),qe=R(Me,[["__scopeId","data-v-c343f774"]]),Oe=G({__name:"banHistoryTable",props:{ip:{}},setup(K){const d=V(),{t:l,d:z}=M(),{data:n,total:$,current:A,loading:v,pageSize:D,changeCurrent:f,changePageSize:L,refresh:P}=ne(ve,{defaultParams:[{ip:K.ip,page:1,pageSize:10}],pagination:{currentKey:"page",pageSizeKey:"pageSize",totalKey:"data.total"},cacheKey:r=>`${d.endpoint}-banlogs-${r?.[0].page||1}-${r?.[0].pageSize||10}`});me(()=>d.endpoint,P);const H=[{title:()=>l("page.banlog.banlogTable.column.banTime")+"/"+l("page.banlog.banlogTable.column.unbanTime"),slotName:"banAt",width:220},{title:()=>l("page.banlog.banlogTable.column.peerPort"),dataIndex:"peerPort",width:80},{title:()=>l("page.banlog.banlogTable.column.peerId"),slotName:"peerId",width:120},{title:()=>l("page.banlog.banlogTable.column.trafficSnapshot"),slotName:"peerStatus",width:150},{title:()=>l("page.banlog.banlogTable.column.torrentName"),dataIndex:"torrentName",ellipsis:!0,tooltip:!0},{title:()=>l("page.banlog.banlogTable.column.torrentSize"),slotName:"torrentSize",width:120},{title:()=>l("page.banlog.banlogTable.column.description"),dataIndex:"description",ellipsis:!0,tooltip:!0}],g=se(()=>n.value?.data.results);return(r,B)=>{const I=Re,S=O,w=Pe,h=q,b=j,k=E,_=Le,x=W,p=F,C=ie;return i(),c(C,{stripe:!0,columns:H,data:g.value,loading:e(v),pagination:{total:e($),current:e(A),pageSize:e(D),showPageSize:!0,baseSize:4,bufferSize:1},bordered:!1,"column-resizable":"",size:"medium",class:"banlog-table",onPageChange:e(f),onPageSizeChange:e(L)},{banAt:t(({record:u})=>[a(h,{fill:"",direction:"vertical"},{default:t(()=>[a(S,null,{default:t(()=>[a(I),o(" "+s(e(z)(u.banAt,"long")),1)]),_:2},1024),a(S,null,{default:t(()=>[a(w),o(" "+s(u.unbanAt?e(z)(u.unbanAt,"long"):e(l)("page.banlog.banlogTable.notUnbanned")),1)]),_:2},1024)]),_:2},1024)]),peerStatus:t(({record:u})=>[a(h,{fill:"",style:{"justify-content":"space-between"}},{default:t(()=>[a(h,{fill:"",direction:"vertical"},{default:t(()=>[a(S,null,{default:t(()=>[a(b,{class:"green"}),o(" "+s(e(T)(u.peerUploaded)),1)]),_:2},1024),a(S,null,{default:t(()=>[a(k,{class:"red"}),o(" "+s(e(T)(u.peerDownloaded)),1)]),_:2},1024)]),_:2},1024),a(x,{content:(u.peerProgress*100).toFixed(2)+"%"},{default:t(()=>[a(_,{percent:u.peerProgress,size:"mini"},null,8,["percent"])]),_:2},1032,["content"])]),_:2},1024)]),peerId:t(({record:u})=>[N("p",null,[o(s(u.peerId?u.peerId:e(l)("page.banlist.banlist.listItem.empty"))+" ",1),a(x,{content:u.peerClientName?u.peerClientName:e(l)("page.banlist.banlist.listItem.empty")},{default:t(()=>[a(p)]),_:2},1032,["content"])])]),torrentSize:t(({record:u})=>[a(x,{content:`Hash: ${u.torrentInfoHash}`},{default:t(()=>[N("p",null,s(e(T)(u.torrentSize)),1)]),_:2},1032,["content"])]),_:1},8,["data","loading","pagination","onPageChange","onPageSizeChange"])}}}),We=R(Oe,[["__scopeId","data-v-50b35476"]]),Je={class:"center searchContainer"},Qe={class:"result-container center"},Xe=G({__name:"index",setup(K){const d=ee(""),{t:l,d:z}=M(),{data:n,loading:$,run:A,error:v}=fe(Ie,{manual:!0}),D=V(),f=se(()=>D.plusStatus),L=ee([]),{query:P}=be(),H=g=>{if(g){if(n.value=void 0,L.value=[],g!==P.ip){const r=new URLSearchParams(window.location.search);r.set("ip",g),window.history.pushState({},"",new URL(`${window.location.origin}${window.location.pathname}?${r.toString()}`))}A(g)}};return ye(()=>{P.ip&&(d.value=P.ip,H(d.value))}),(g,r)=>{const B=xe,I=O,S=Ce,w=Ne,h=re,b=W,k=q,_=$e,x=j,p=E,C=F,u=Ae,J=De,ce=He,Q=Be,X=Ue,Y=Ge,Z=Ke,pe=Fe,de=je,ue=Ve,_e=Ee;return i(),c(k,{direction:"vertical",fill:"",class:"center"},{default:t(()=>[a(S,{style:{"text-align":"center"}},{default:t(()=>[a(B,null,{default:t(()=>[o(s(e(l)("page.ipList.title")),1)]),_:1}),a(I,null,{default:t(()=>[o(s(e(l)("page.ipList.description")),1)]),_:1})]),_:1}),N("div",Je,[a(w,{modelValue:d.value,"onUpdate:modelValue":r[0]||(r[0]=y=>d.value=y),"search-button":"",placeholder:"192.168.1.1....",class:"searchBox",loading:e($),onSearch:H},null,8,["modelValue","loading"])]),N("div",Qe,[he(a(_e,{class:"result-card",style:we({minWidth:e(n)?.data.found?"1150px":"400px"}),hoverable:""},{default:t(()=>[e(v)?(i(),c(ue,{key:1,status:"500",title:e(l)("page.ipList.error"),subtitle:e(v).message},{default:t(()=>[a(S,{style:{background:"var(--color-fill-2)",padding:"24px"}},{default:t(()=>[a(de,null,{default:t(()=>r[7]||(r[7]=[o("Details:")])),_:1,__:[7]}),N("ul",null,[(i(!0),U(le,null,oe(e(v).stack?.split(`
`),y=>(i(),U("li",{key:y},s(y),1))),128))])]),_:1})]),_:1},8,["title","subtitle"])):(i(),c(k,{key:0,direction:"vertical",fill:""},{default:t(()=>[a(ce,null,{title:t(()=>[a(k,null,{default:t(()=>[o(s(e(n)?.data.address)+" ",1),e(n)?.data.found?m("",!0):(i(),c(b,{key:0,content:e(l)("page.ipList.notfound.tips")},{default:t(()=>[a(h,null,{default:t(()=>r[2]||(r[2]=[o("Not found")])),_:1,__:[2]})]),_:1},8,["content"]))]),_:1})]),default:t(()=>[e(n)?.data.found?(i(),c(_,{key:0,label:e(l)("page.ipList.label.banCount"),span:2},{default:t(()=>[o(s(e(n)?.data.banCount),1)]),_:1},8,["label"])):m("",!0),e(n)?.data.found?(i(),c(_,{key:1,label:e(l)("page.ipList.label.torrentAccessCount"),span:2},{default:t(()=>[o(s(e(n)?.data.torrentAccessCount),1)]),_:1},8,["label"])):m("",!0),e(n)?.data.found?(i(),c(_,{key:2,label:e(l)("page.ipList.label.uploadedToPeer"),span:2},{default:t(()=>[a(I,null,{default:t(()=>[a(x,{class:"green"}),o(" "+s(e(T)(e(n)?.data.uploadedToPeer??0)),1)]),_:1})]),_:1},8,["label"])):m("",!0),e(n)?.data.found?(i(),c(_,{key:3,label:e(l)("page.ipList.label.downloadedFromPeer"),span:2},{default:t(()=>[a(I,null,{default:t(()=>[a(p,{class:"red"}),o(" "+s(e(T)(e(n)?.data.downloadedFromPeer??0)),1)]),_:1})]),_:1},8,["label"])):m("",!0),e(n)?.data.found?(i(),c(_,{key:4,label:e(l)("page.ipList.label.firstTimeSeen"),span:2},{default:t(()=>[o(s(e(z)(e(n)?.data.firstTimeSeen??0,"long")),1)]),_:1},8,["label"])):m("",!0),e(n)?.data.found?(i(),c(_,{key:5,label:e(l)("page.ipList.label.lastTimeSeen"),span:2},{default:t(()=>[o(s(e(z)(e(n)?.data.lastTimeSeen??0,"long")),1)]),_:1},8,["label"])):m("",!0),e(n)?.data.geo?.country?.iso||e(n)?.data.geo?.city?.name?(i(),c(_,{key:6,label:e(l)("page.banlist.banlist.listItem.geo"),span:2},{default:t(()=>[e(n).data.geo?.country?.iso?(i(),c(ge,{key:0,iso:e(n).data.geo?.country?.iso??""},null,8,["iso"])):m("",!0),o(" "+s(`${e(n).data.geo?.country?.name??""} ${e(n).data.geo?.city?.name??""}`),1)]),_:1},8,["label"])):m("",!0),e(n)?.data.geo?.network?.isp?(i(),c(_,{key:7,label:e(l)("page.banlist.banlist.listItem.network.isp"),span:1},{default:t(()=>[o(s(e(n).data.geo?.network?.isp),1)]),_:1},8,["label"])):m("",!0),e(n)?.data.geo?.network?.netType?(i(),c(_,{key:8,label:e(l)("page.banlist.banlist.listItem.network.netType"),span:2},{default:t(()=>[o(s(e(n).data.geo?.network?.netType),1)]),_:1},8,["label"])):m("",!0),e(n)?.data.geo?.as?(i(),c(_,{key:9,label:e(l)("page.banlist.banlist.listItem.asn"),span:2},{default:t(()=>[a(k,null,{default:t(()=>[a(I,null,{default:t(()=>[o(s(e(n).data.geo?.as?.organization),1)]),_:1}),a(h,{color:e(ae)((e(n).data.geo?.as?.number??0).toString())},{default:t(()=>[o(s(e(n).data.geo?.as?.number),1)]),_:1},8,["color"]),a(b,{content:e(l)("page.banlist.banlist.listItem.asn.subnet")+e(n).data.geo?.as?.network?.ipAddress+"/"+e(n).data.geo?.as?.network?.prefixLength},{default:t(()=>[a(u,{href:`https://2ip.io/analytics/asn-list/?asnId=${e(n).data.geo?.as?.number}`,hoverable:!1},{default:t(()=>[a(C)]),_:1},8,["href"])]),_:1},8,["content"])]),_:1})]),_:1},8,["label"])):m("",!0),a(_,{span:8},{label:t(()=>[a(k,null,{default:t(()=>[o(s(e(l)("page.ipList.shortcut"))+" ",1),a(b,{content:e(l)("page.ipList.shortcut.tips")},{default:t(()=>[a(C)]),_:1},8,["content"])]),_:1})]),default:t(()=>[a(k,null,{default:t(()=>[a(J,{href:`https://ip.ping0.cc/ip/${d.value}`,type:"outline"},{default:t(()=>r[3]||(r[3]=[o(" ping0 ")])),_:1,__:[3]},8,["href"]),a(J,{href:`https://search.censys.io/hosts/${d.value}`,type:"outline"},{default:t(()=>r[4]||(r[4]=[o(" Censys ")])),_:1,__:[4]},8,["href"])]),_:1})]),_:1})]),_:1}),e(n)?.data.found?(i(),c(pe,{key:0,"active-key":L.value,"onUpdate:activeKey":r[1]||(r[1]=y=>L.value=y),bordered:!1,"destroy-on-hide":""},{default:t(()=>[a(Z,{key:"1",header:e(l)("page.ipList.label.accessHistory"),disabled:!f.value?.activated,class:"collapse-table"},te({"expand-icon":t(({active:y})=>[f.value?.activated&&!y?(i(),c(Q,{key:0})):f.value?.activated&&y?(i(),c(X,{key:1})):(i(),c(Y,{key:2}))]),default:t(()=>[a(qe,{ip:e(n).data.address},null,8,["ip"])]),_:2},[f.value?.activated?void 0:{name:"extra",fn:t(()=>[a(b,{content:e(l)("page.ipList.plusLock")},{default:t(()=>[a(h,{size:"small"},{default:t(()=>r[5]||(r[5]=[o("Plus")])),_:1,__:[5]})]),_:1},8,["content"])]),key:"0"}]),1032,["header","disabled"]),a(Z,{key:"2",header:e(l)("page.ipList.label.banHistory"),disabled:!f.value?.activated,class:"collapse-table"},te({"expand-icon":t(({active:y})=>[f.value?.activated&&!y?(i(),c(Q,{key:0})):f.value?.activated&&y?(i(),c(X,{key:1})):(i(),c(Y,{key:2}))]),default:t(()=>[a(We,{ip:e(n).data.address},null,8,["ip"])]),_:2},[f.value?.activated?void 0:{name:"extra",fn:t(()=>[a(b,{content:e(l)("page.ipList.plusLock")},{default:t(()=>[a(h,{size:"small"},{default:t(()=>r[6]||(r[6]=[o("Plus")])),_:1,__:[6]})]),_:1},8,["content"])]),key:"0"}]),1032,["header","disabled"])]),_:1},8,["active-key"])):m("",!0)]),_:1}))]),_:1},8,["style"]),[[Se,e(n)?.data||e(v)]])])]),_:1})}}}),st=R(Xe,[["__scopeId","data-v-a1560c1f"]]);export{st as default};
