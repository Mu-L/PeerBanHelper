import{B as V,I as $,b as z,f as _,c as O,j as U,d as q,_ as E}from"./index-CSwaldQg.js";import{_ as K}from"./queryIpLink.vue_vue_type_script_setup_true_lang-BYzWFW1A.js";import{f as R,a7 as G,a as f,a9 as H,s as w,k as c,t as e,y as t,a3 as o,m as J,v as p,u as L,x as l,j as N,F as Q,P as W}from"./libs-BYIN-Nlk.js";import{t as X,e as Y,S as Z,K as ee,T as ae,F as te}from"./arcoDesign-CWLifbdQ.js";import"./uuid-5hg4BtTT.js";const se=R({__name:"peerListModal",setup(oe,{expose:I}){const{t:n}=G(),u=f(!1),m=f(""),g=f(""),v=f("");I({showModal:(i,s,r)=>{m.value=i,g.value=s,v.value=r,u.value=!0,D(i,s)}});const k=()=>{u.value=!1,m.value="",g.value=""},{data:h,loading:P,run:D,cancel:F}=H(V,{defaultParams:[m.value,g.value],manual:!0,pollingInterval:1e3}),S=[{title:()=>n("page.dashboard.peerList.column.address"),slotName:"peerAddress",width:320},{title:()=>n("page.dashboard.peerList.column.flag"),slotName:"flags",width:110},{title:"Peer ID",dataIndex:"peer.id",width:100},{title:()=>n("page.dashboard.peerList.column.clientName"),dataIndex:"peer.clientName",width:300},{title:()=>n("page.dashboard.peerList.column.speed"),slotName:"speed",width:140},{title:()=>n("page.dashboard.peerList.column.uploadedDownloaded"),slotName:"uploadDownload",width:140},{title:()=>n("page.dashboard.peerList.column.progress"),slotName:"progress",width:100}],T=i=>i.split(" ").map(s=>s+" - "+n("page.dashboard.peerList.column.flags."+s.trim()));return(i,s)=>{const r=ae,d=Z,b=z,y=O,A=ee,B=$,C=Y,j=X,M=te;return c(),w(M,{visible:u.value,"onUpdate:visible":s[0]||(s[0]=a=>u.value=a),"hide-cancel":"",closable:"","unmount-on-close":"",width:"auto",onOk:k,onClose:s[1]||(s[1]=a=>o(F)())},{title:e(()=>[p(l(o(n)("page.dashboard.peerList.title")+v.value),1)]),default:e(()=>[t(j,{columns:S,data:o(h)?.data,loading:!o(P)&&!o(h),style:{width:"1600px"},"virtual-list-props":{height:500},pagination:!1},{peerAddress:e(({record:a})=>[t(d,{wrap:!1},{default:e(()=>[a.geo?.country?.iso?(c(),w(U,{key:0,iso:a.geo.country.iso},null,8,["iso"])):L("",!0),t(r,{copyable:"",code:"",style:{"white-space":"nowrap"}},{default:e(()=>[t(K,{ip:a.peer.address.ip,style:{color:"var(--color-text-2)"}},{default:e(()=>[p(l(o(q)(a.peer.address.ip,a.peer.address.port)),1)]),_:2},1032,["ip"])]),_:2},1024)]),_:2},1024)]),speed:e(({record:a})=>[t(d,{fill:"",style:{"justify-content":"space-between"}},{default:e(()=>[t(d,{fill:"",direction:"vertical"},{default:e(()=>[t(r,null,{default:e(()=>[t(b,{class:"green"}),p(" "+l(o(_)(a.peer.uploadSpeed))+"/s ",1)]),_:2},1024),t(r,null,{default:e(()=>[t(y,{class:"red"}),p(" "+l(o(_)(a.peer.downloadSpeed))+"/s ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),uploadDownload:e(({record:a})=>[t(d,{fill:"",style:{"justify-content":"space-between"}},{default:e(()=>[t(d,{fill:"",direction:"vertical"},{default:e(()=>[t(r,null,{default:e(()=>[t(b,{class:"green"}),p(" "+l(o(_)(a.peer.uploaded)),1)]),_:2},1024),t(r,null,{default:e(()=>[t(y,{class:"red"}),p(" "+l(o(_)(a.peer.downloaded)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),progress:e(({record:a})=>[t(d,null,{default:e(()=>[t(A,{percent:a.peer.progress,size:"mini"},null,8,["percent"]),t(r,null,{default:e(()=>[p(l((a.peer.progress*100).toFixed(2)+"%"),1)]),_:2},1024)]),_:2},1024)]),flags:e(({record:a})=>[J("p",null,[p(l(a.peer.flags)+" ",1),a.peer.flags?(c(),w(C,{key:0},{content:e(()=>[(c(!0),N(Q,null,W(T(a.peer.flags),x=>(c(),N("p",{key:x},l(x),1))),128))]),default:e(()=>[t(B)]),_:2},1024)):L("",!0)])]),_:1},8,["data","loading"])]),_:1},8,["visible"])}}}),ie=E(se,[["__scopeId","data-v-deff301f"]]);export{ie as default};
